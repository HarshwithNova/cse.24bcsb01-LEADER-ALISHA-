<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cosmic Watch</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>

<style>
html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  font-family:'Orbitron',sans-serif;
  background:black;
  overflow:hidden
}

*{
  cursor:url("https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNVYGbEM9cfEzJOeDe3frD__vWMtlwadw6IjVYgjYhocyZZKxA&s") 16 16,auto
}

.hero{
  position:fixed;
  inset:0;
  background:
    radial-gradient(circle at 30% 40%,rgba(140,90,255,.25),transparent 60%),
    radial-gradient(circle at 70% 60%,rgba(0,200,255,.18),transparent 65%),
    url("https://images.unsplash.com/photo-1444703686981-a3abbc4d4fe3?q=80&w=2400") center/cover no-repeat;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:5;
  transition:transform 2s ease,opacity 2s ease
}

.hero.hide{
  transform:scale(2);
  opacity:0;
  pointer-events:none
}

.overlay{
  position:absolute;
  inset:0;
  background:rgba(5,0,15,.6)
}

.stars{
  position:absolute;
  inset:0;
  background:
    radial-gradient(1px 1px at 20% 30%,white,transparent),
    radial-gradient(1px 1px at 70% 80%,white,transparent),
    radial-gradient(1px 1px at 40% 60%,white,transparent),
    radial-gradient(1px 1px at 90% 20%,white,transparent);
  animation:twinkle 6s infinite alternate;
  opacity:.5
}

@keyframes twinkle{
  from{opacity:.3}
  to{opacity:.6}
}

.content{
  position:relative;
  text-align:center;
  z-index:2;
  color:white
}

.title{
  font-size:5rem;
  letter-spacing:.4em;
  font-weight:800;
  text-shadow:0 0 40px rgba(120,80,255,.7)
}

.subtitle{
  margin-top:15px;
  font-size:1.6rem;
  letter-spacing:.25em;
  color:#c7b8ff
}

.tagline{
  margin-top:25px;
  max-width:700px;
  font-size:1rem;
  line-height:1.7;
  opacity:.9
}

.cta{
  margin-top:45px;
  padding:14px 48px;
  border-radius:40px;
  background:linear-gradient(135deg,#7f5cff,#3cf0ff);
  color:black;
  font-weight:700;
  letter-spacing:.18em;
  border:none;
  cursor:pointer;
  transition:.3s ease
}

.cta:hover{
  transform:scale(1.08);
  box-shadow:0 0 40px rgba(100,200,255,.8)
}

#infoPanel{
  position:fixed;
  right:20px;
  top:80px;
  width:330px;
  max-height:80vh;
  overflow-y:auto;
  background:rgba(20,10,40,.85);
  padding:15px;
  border-radius:14px;
  z-index:3;
  opacity:0;
  pointer-events:none;
  transition:.8s ease
}

#infoPanel.show{
  opacity:1;
  pointer-events:auto
}

#infoPanel button{
  width:100%;
  padding:10px;
  margin-bottom:10px;
  border:none;
  border-radius:8px;
  background:linear-gradient(135deg,#38bdf8,#7f5cff);
  font-family:'Orbitron';
  font-weight:600;
  cursor:pointer
}

.card{
  background:rgba(60,20,90,.75);
  padding:10px;
  margin-bottom:10px;
  border-radius:10px;
  font-size:13px
}

.danger{color:#ff6b6b;font-weight:700}
.safe{color:#7dffb3;font-weight:700}

#spaceScene{
  position:fixed;
  inset:0;
  z-index:1
}

audio{display:none}
</style>
</head>

<body>

<div class="hero" id="hero">
  <div class="overlay"></div>
  <div class="stars"></div>
  <div class="content">
    <div class="title">COSMIC</div>
    <div class="subtitle">WATCH</div>
    <div class="tagline">
      Real-time near-Earth asteroid visualization and risk awareness
    </div>
    <button class="cta" onclick="enterSpace()">ENTER SPACE</button>
  </div>
</div>

<div id="infoPanel">
  <div style="text-align:center;font-size:13px;opacity:.8;margin-bottom:8px">
    Click to fetch today’s asteroid data
  </div>
  <button onclick="loadAsteroids()">☄ Fetch Asteroids</button>
  <div id="asteroidList"></div>
</div>

<audio id="spaceAudio" loop>
  <source src="https://cdn.pixabay.com/audio/2022/03/15/audio_7c8a2c1e88.mp3">
</audio>

<canvas id="spaceScene"></canvas>

<script>
const hero=document.getElementById("hero")
const panel=document.getElementById("infoPanel")
const audio=document.getElementById("spaceAudio")

function enterSpace(){
  audio.play()
  hero.classList.add("hide")
  setTimeout(()=>panel.classList.add("show"),1500)
}

const scene=new THREE.Scene()
const camera=new THREE.PerspectiveCamera(60,innerWidth/innerHeight,.1,2000)
camera.position.set(0,0,8)

const renderer=new THREE.WebGLRenderer({canvas:spaceScene,antialias:true})
renderer.setSize(innerWidth,innerHeight)

const starsGeo=new THREE.BufferGeometry()
const starPos=[]
for(let i=0;i<8000;i++){
  starPos.push((Math.random()-.5)*2000,(Math.random()-.5)*2000,(Math.random()-.5)*2000)
}
starsGeo.setAttribute("position",new THREE.Float32BufferAttribute(starPos,3))
scene.add(new THREE.Points(starsGeo,new THREE.PointsMaterial({color:0xffffff,size:.7})))

scene.add(new THREE.PointLight(0xffffff,1.6))
scene.add(new THREE.AmbientLight(0x555555))

const earthOrbit=new THREE.Object3D()
scene.add(earthOrbit)

const earth=new THREE.Mesh(
  new THREE.SphereGeometry(.7,64,64),
  new THREE.MeshStandardMaterial({
    map:new THREE.TextureLoader().load("https://threejs.org/examples/textures/land_ocean_ice_cloud_2048.jpg")
  })
)
earth.position.x=3
earthOrbit.add(earth)

const moonOrbit=new THREE.Object3D()
earth.add(moonOrbit)

const moon=new THREE.Mesh(
  new THREE.SphereGeometry(.18,32,32),
  new THREE.MeshStandardMaterial({color:0xcccccc})
)
moon.position.x=1
moonOrbit.add(moon)

const asteroids=[]
for(let i=0;i<35;i++){
  const g=new THREE.IcosahedronGeometry(Math.random()*.12+.05,1)
  const v=(170+Math.random()*40)/255
  const m=new THREE.MeshStandardMaterial({color:new THREE.Color(v,v,v),roughness:.9})
  const a=new THREE.Mesh(g,m)
  a.userData={angle:Math.random()*6.28,speed:Math.random()*.002+.001,radius:Math.random()*3+4}
  scene.add(a)
  asteroids.push(a)
}

function animate(){
  requestAnimationFrame(animate)
  earthOrbit.rotation.y+=.001
  earth.rotation.y+=.002
  moonOrbit.rotation.y+=.01
  asteroids.forEach(a=>{
    a.userData.angle+=a.userData.speed
    a.position.x=Math.cos(a.userData.angle)*a.userData.radius
    a.position.z=Math.sin(a.userData.angle)*a.userData.radius
    a.rotation.x+=.003
    a.rotation.y+=.003
  })
  renderer.render(scene,camera)
}
animate()

function loadAsteroids(){
  const d=new Date().toISOString().split("T")[0]
  fetch(`https://api.nasa.gov/neo/rest/v1/feed?start_date=${d}&end_date=${d}&api_key=DEMO_KEY`)
    .then(r=>r.json())
    .then(data=>{
      asteroidList.innerHTML=""
      data.near_earth_objects[d].forEach(a=>{
        const c=a.close_approach_data[0]
        asteroidList.innerHTML+=`
        <div class="card">
          <strong>${a.name}</strong><br>
          Diameter ${a.estimated_diameter.meters.estimated_diameter_max.toFixed(1)} m<br>
          Distance ${Number(c.miss_distance.kilometers).toLocaleString()} km<br>
          Velocity ${Number(c.relative_velocity.kilometers_per_hour).toFixed(0)} km/h<br>
          <span class="${a.is_potentially_hazardous_asteroid?'danger':'safe'}">
            ${a.is_potentially_hazardous_asteroid?'Hazardous':'Safe'}
          </span>
        </div>`
      })
    })
}

addEventListener("resize",()=>{
  camera.aspect=innerWidth/innerHeight
  camera.updateProjectionMatrix()
  renderer.setSize(innerWidth,innerHeight)
})
</script>

</body>
</html>
